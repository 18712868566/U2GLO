/*===========加载静态资源==========*/
var mainfest = [
    {
        src: "//cdnstatic.herogame.com/static/ee_hero_com/pre/pc/images/bg1.png",
    },
    {
        src: "//cdnstatic.herogame.com/static/ee_hero_com/pre/pc/images/bg2.jpg",
    },
    {
        src: "//cdnstatic.herogame.com/static/ee_hero_com/pre/pc/images/pv.jpg",
    },
    {
        src: "//cdnstatic.herogame.com/static/ee_hero_com/pre/pc/images/bg3.jpg",
    },
    {
        src: "//cdnstatic.herogame.com/static/ee_hero_com/pre/pc/images/bg4.jpg",
    },
    {
        src: "//cdnstatic.herogame.com/static/ee_hero_com/pre/pc/images/body-footer.jpg",
    },
    {
        src: "./images/hero/omar/1.png",
    },
    {
        src: "./images/hero/omar/2.png",
    },
    {
        src: "./images/hero/omar/3.png",
    },
    {
        src: "./images/hero/omar/4.png",
    },
    {
        src: "./images/hero/omar/5.png",
    },
    {
        src: "./images/hero/omar/6.png",
    },
    {
        src: "./images/hero/omar/7.png",
    },
    {
        src: "./images/hero/omar/8.png",
    },
    {
        src: "./images/hero/omar/9.png",
    },
    {
        src: "./images/hero/omar/10.png",
    },
    {
        src: "./images/hero/omar/11.png",
    },
    {
        src: "./images/hero/omar/12.png",
    },
    {
        src: "./images/hero/omar/13.png",
    },
    {
        src: "./images/hero/omar/14.png",
    },
    {
        src: "./images/hero/omar/15.png",
    },
    {
        src: "./images/hero/emma/1.png",
    },
    {
        src: "./images/hero/emma/2.png",
    },
    {
        src: "./images/hero/emma/3.png",
    },
    {
        src: "./images/hero/emma/4.png",
    },
    {
        src: "./images/hero/emma/5.png",
    },
    {
        src: "./images/hero/emma/6.png",
    },
    {
        src: "./images/hero/emma/7.png",
    },
    {
        src: "./images/hero/emma/8.png",
    },
    {
        src: "./images/hero/emma/9.png",
    },
    {
        src: "./images/hero/emma/10.png",
    },
    {
        src: "./images/hero/emma/11.png",
    },
    {
        src: "./images/hero/emma/12.png",
    },
    {
        src: "./images/hero/emma/13.png",
    },
    {
        src: "./images/hero/emma/14.png",
    },
    {
        src: "./images/hero/emma/15.png",
    },
    {
        src: "./images/hero/emma/16.png",
    },
    {
        src: "./images/hero/emma/17.png",
    },
    {
        src: "./images/hero/emma/18.png",
    },
    {
        src: "./images/hero/emma/19.png",
    },
    {
        src: "./images/hero/emma/20.png",
    },
    {
        src: "./images/hero/emma/21.png",
    },
    {
        src: "./images/hero/emma/22.png",
    },
    {
        src: "./images/hero/emma/23.png",
    },
    {
        src: "./images/hero/emma/24.png",
    },
    {
        src: "./images/hero/emma/25.png",
    },
    {
        src: "./images/hero/emma/26.png",
    },
    {
        src: "./images/hero/emma/27.png",
    },
    {
        src: "./images/hero/emma/28.png",
    },
    {
        src: "./images/hero/emma/29.png",
    },
    {
        src: "./images/hero/emma/30.png",
    },
    {
        src: "./images/hero/emma/31.png",
    },

    {
        src: "./images/hero/artas/1.png",
    },
    {
        src: "./images/hero/artas/2.png",
    },
    {
        src: "./images/hero/artas/3.png",
    },
    {
        src: "./images/hero/artas/4.png",
    },
    {
        src: "./images/hero/artas/5.png",
    },
    {
        src: "./images/hero/artas/6.png",
    },
    {
        src: "./images/hero/artas/7.png",
    },
    {
        src: "./images/hero/artas/8.png",
    },
    {
        src: "./images/hero/artas/9.png",
    },
    {
        src: "./images/hero/artas/10.png",
    },
    {
        src: "./images/hero/artas/11.png",
    },
    {
        src: "./images/hero/artas/12.png",
    },
    {
        src: "./images/hero/artas/13.png",
    },
    {
        src: "./images/hero/artas/14.png",
    },
    {
        src: "./images/hero/artas/15.png",
    },

    {
        src: "./images/hero/kuite/1.png",
    },
    {
        src: "./images/hero/kuite/2.png",
    },
    {
        src: "./images/hero/kuite/3.png",
    },
    {
        src: "./images/hero/kuite/4.png",
    },
    {
        src: "./images/hero/kuite/5.png",
    },
    {
        src: "./images/hero/kuite/6.png",
    },
    {
        src: "./images/hero/kuite/7.png",
    },
    {
        src: "./images/hero/kuite/8.png",
    },
    {
        src: "./images/hero/kuite/9.png",
    },
    {
        src: "./images/hero/kuite/10.png",
    },
    {
        src: "./images/hero/kuite/11.png",
    },
    {
        src: "./images/hero/kuite/12.png",
    },
    {
        src: "./images/hero/kuite/13.png",
    },
    {
        src: "./images/hero/kuite/14.png",
    },
    {
        src: "./images/hero/kuite/15.png",
    },
    {
        src: "./images/hero/kuite/16.png",
    },

    // crete
    {
        src: "./images/hero/crete/1.png",
    },
    {
        src: "./images/hero/crete/2.png",
    },
    {
        src: "./images/hero/crete/3.png",
    },
    {
        src: "./images/hero/crete/4.png",
    },
    {
        src: "./images/hero/crete/5.png",
    },
    {
        src: "./images/hero/crete/6.png",
    },
    {
        src: "./images/hero/crete/7.png",
    },
    {
        src: "./images/hero/crete/8.png",
    },
    {
        src: "./images/hero/crete/9.png",
    },
    {
        src: "./images/hero/crete/10.png",
    },
    {
        src: "./images/hero/crete/11.png",
    },
    {
        src: "./images/hero/crete/12.png",
    },
    {
        src: "./images/hero/crete/13.png",
    },
    {
        src: "./images/hero/crete/14.png",
    },
    // luke
    {
        src: "./images/hero/luke/1.png",
    },
    {
        src: "./images/hero/luke/2.png",
    },
    {
        src: "./images/hero/luke/3.png",
    },
    {
        src: "./images/hero/luke/4.png",
    },
    {
        src: "./images/hero/luke/5.png",
    },
    {
        src: "./images/hero/luke/6.png",
    },
    {
        src: "./images/hero/luke/7.png",
    },
    {
        src: "./images/hero/luke/8.png",
    },
    {
        src: "./images/hero/luke/9.png",
    },
    {
        src: "./images/hero/luke/10.png",
    },
    {
        src: "./images/hero/luke/11.png",
    },
    {
        src: "./images/hero/luke/12.png",
    },
    {
        src: "./images/hero/luke/13.png",
    },
    {
        src: "./images/hero/luke/14.png",
    },
    {
        src: "./images/hero/luke/15.png",
    },
    {
        src: "./images/hero/luke/16.png",
    },
];


let length = mainfest.length;
let images = new Array(); // 定义一个数组容器，用来存储预加载完成的图片
let loadEl = document.querySelector('.loading');

function preloadImg() {
    let count = 0; // 计算器，计算加载了多少图片
    for (let i = 0; i < length; i++) {
        images[i] = new Image();
        images[i].src = `${mainfest[i].src}`;
        // 谷歌浏览器高版本支持大部分ES6，所以这里就不用字符串拼接了。
        // console.log(i)
        images[i].onload = function () {
            count++;
            if (count === length) {
                console.log('加载完成');
                // shuangjie.$pageLoad.addClass('hide').next().removeClass('hide')
                $('.loading').hide();
                $('body').removeClass('noloading');


            } else {
                // console.log(images[i].src);
            }
        }
    }
}

preloadImg();
/*==============资源加载完毕===========*/

var granimInstance;


$(function () {
    $(document).on("click", "#alertInfo .close,.btn_close,.btn_fb_login_no", dialog.closeDiv);

    // 下拉动画方案
    $('.rem-box .glb-ani').addClass('hide');

    // 活动规则
    $(document).on('click', '.p1 .after', function (event) {
        event.preventDefault();
        dialog.alertPop_gz();
    });
    // 官网
    $(document).on('click', '.icon-gw ', function (event) {
        event.preventDefault();
        layer.msg('Coming Soon!');
    });


    // 底部视频声音开
    var bvideo = document.getElementById('videoKv')

    $(document).on('click', '.video-play', function (event) {
        event.preventDefault();
        mutedV()
        $(this).toggleClass('open');
    });

    //静音  点击第一次静音再点击关闭静音
    function mutedV() {
        if (bvideo.muted === true) {
            bvideo.muted = false;
        } else {
            bvideo.muted = true;
        }
    }


    var datav1 = [
        './images/hero/omar/1.png',
        './images/hero/omar/2.png',
        './images/hero/omar/3.png',
        './images/hero/omar/4.png',
        './images/hero/omar/5.png',
        './images/hero/omar/6.png',
        './images/hero/omar/7.png',
        './images/hero/omar/8.png',
        './images/hero/omar/9.png',
        './images/hero/omar/10.png',
        './images/hero/omar/11.png',
        './images/hero/omar/12.png',
        './images/hero/omar/13.png',
        './images/hero/omar/14.png',
        './images/hero/omar/15.png',
        './images/hero/omar/16.png',
    ],
        img_1 = document.getElementById("omarhero"),
        cont_1 = 0;

    if ($('#omarhero').length > 0) {
        setInterval(function () {
            img_1.src = datav1[cont_1], cont_1++, cont_1 == datav1.length && (cont_1 = 0)
        }, 1e3 / 10);
    }

    var datav2 = [
        './images/hero/emma/1.png',
        './images/hero/emma/2.png',
        './images/hero/emma/3.png',
        './images/hero/emma/4.png',
        './images/hero/emma/5.png',
        './images/hero/emma/6.png',
        './images/hero/emma/7.png',
        './images/hero/emma/8.png',
        './images/hero/emma/9.png',
        './images/hero/emma/10.png',
        './images/hero/emma/11.png',
        './images/hero/emma/12.png',
        './images/hero/emma/13.png',
        './images/hero/emma/14.png',
        './images/hero/emma/15.png',
        './images/hero/emma/16.png',
        './images/hero/emma/17.png',
        './images/hero/emma/18.png',
        './images/hero/emma/19.png',
        './images/hero/emma/20.png',
        './images/hero/emma/21.png',
        './images/hero/emma/22.png',
        './images/hero/emma/23.png',
        './images/hero/emma/24.png',
        './images/hero/emma/25.png',
        './images/hero/emma/26.png',
        './images/hero/emma/27.png',
        './images/hero/emma/28.png',
        './images/hero/emma/29.png',
        './images/hero/emma/30.png',
        './images/hero/emma/31.png',
    ],
        img_2 = document.getElementById("emmahero"),
        cont_2 = 0;

    if ($('#emmahero').length > 0) {
        setInterval(function () {
            img_2.src = datav2[cont_2], cont_2++, cont_2 == datav2.length && (cont_2 = 0)
        }, 1e3 / 10);
    }


    var datav3 = [
        './images/hero/artas/1.png',
        './images/hero/artas/2.png',
        './images/hero/artas/3.png',
        './images/hero/artas/4.png',
        './images/hero/artas/5.png',
        './images/hero/artas/6.png',
        './images/hero/artas/7.png',
        './images/hero/artas/8.png',
        './images/hero/artas/9.png',
        './images/hero/artas/10.png',
        './images/hero/artas/11.png',
        './images/hero/artas/12.png',
        './images/hero/artas/13.png',
        './images/hero/artas/14.png',
        './images/hero/artas/15.png',
    ],
        img_3 = document.getElementById("artashero"),
        cont_3 = 0;

    if ($('#artashero').length > 0) {
        setInterval(function () {
            img_3.src = datav3[cont_3], cont_3++, cont_3 == datav3.length && (cont_3 = 0)
        }, 1e3 / 10);
    }

    var datav4 = [
        './images/hero/kuite/1.png',
        './images/hero/kuite/2.png',
        './images/hero/kuite/3.png',
        './images/hero/kuite/4.png',
        './images/hero/kuite/5.png',
        './images/hero/kuite/6.png',
        './images/hero/kuite/7.png',
        './images/hero/kuite/8.png',
        './images/hero/kuite/9.png',
        './images/hero/kuite/10.png',
        './images/hero/kuite/11.png',
        './images/hero/kuite/12.png',
        './images/hero/kuite/13.png',
        './images/hero/kuite/14.png',
        './images/hero/kuite/15.png',
        './images/hero/kuite/16.png',
    ],
        img_4 = document.getElementById("kuitehero"),
        cont_4 = 0;

    if ($('#kuitehero').length > 0) {
        setInterval(function () {
            img_4.src = datav4[cont_4], cont_4++, cont_4 == datav4.length && (cont_4 = 0)
        }, 1e3 / 10);
    }

    var datav5 = [
        './images/hero/crete/1.png',
        './images/hero/crete/2.png',
        './images/hero/crete/3.png',
        './images/hero/crete/4.png',
        './images/hero/crete/5.png',
        './images/hero/crete/6.png',
        './images/hero/crete/7.png',
        './images/hero/crete/8.png',
        './images/hero/crete/9.png',
        './images/hero/crete/10.png',
        './images/hero/crete/11.png',
        './images/hero/crete/12.png',
        './images/hero/crete/13.png',
        './images/hero/crete/14.png',
    ],
        img_5 = document.getElementById("cretehero"),
        cont_5 = 0;

    if ($('#cretehero').length > 0) {
        setInterval(function () {
            img_5.src = datav5[cont_5], cont_5++, cont_5 == datav5.length && (cont_5 = 0)
        }, 1e3 / 10);
    }


    var datav6 = [
        './images/hero/luke/1.png',
        './images/hero/luke/2.png',
        './images/hero/luke/3.png',
        './images/hero/luke/4.png',
        './images/hero/luke/5.png',
        './images/hero/luke/6.png',
        './images/hero/luke/7.png',
        './images/hero/luke/8.png',
        './images/hero/luke/9.png',
        './images/hero/luke/10.png',
        './images/hero/luke/11.png',
        './images/hero/luke/12.png',
        './images/hero/luke/13.png',
        './images/hero/luke/14.png',
        './images/hero/luke/15.png',
        './images/hero/luke/16.png',
    ],
        img_6 = document.getElementById("lukehero"),
        cont_6 = 0;

    if ($('#lukehero').length > 0) {
        setInterval(function () {
            img_6.src = datav6[cont_6], cont_6++, cont_6 == datav6.length && (cont_6 = 0)
        }, 1e3 / 10);
    }



    AOS.init();



    // pre.init();
    let count = 1;
    let lock = false;
    // direction 3 左 4 右
    function tabImg(direction) {
        if (lock) return;
        lock = true;
        let li = document.createElement("li");
        if (direction == 3) {
            count++;
            count >= 6 ? (count = 1) : count;
            document
                .querySelector(".s5-con ul li:first-child")
                .parentNode.removeChild(
                    document.querySelector(".s5-con ul li:first-child")
                );
            li.classList.add(`s5-img-${count}`);
            document.querySelector(".s5-con ul").appendChild(li);
        }

        if (direction == 4) {
            count--;
            count <= 0 ? (count = 5) : count;
            document
                .querySelector(".s5-con ul li:last-child")
                .parentNode.removeChild(
                    document.querySelector(".s5-con ul li:last-child")
                );
            li.classList.add(`s5-img-${count - 1}`);
            document
                .querySelector(".s5-con ul")
                .insertBefore(li, document.querySelector(".s5-con ul").firstChild);
        }

        document.querySelector(
            ".s5-progress-count span"
        ).textContent = `0${count}`;
        document
            .querySelector(".s5-progress")
            .setAttribute("class", `s5-progress s5-progress${count} aos-animate`);

        setTimeout(() => {
            lock = false;
        }, 500);
    }

    $('.s5-con').on('click', function () {
        tabImg(3)
    });
    $('.s5-con .next').on('click', function () {
        tabImg(3)
    });

    $('.s5-con .prve').on('click', function () {
        tabImg(4)
    });

    // 侧边栏悬浮
    $('.rz1').hover(function (param) {
        $('.right_fixed .rt1').addClass('ccurr');
    }, function (param) {
        $('.right_fixed .rt1').removeClass('ccurr');
    });

    $('.rz2').hover(function (param) {
        $('.right_fixed .rt2').addClass('ccurr');
    }, function (param) {
        $('.right_fixed .rt2').removeClass('ccurr');
    });

    $('.rz3').hover(function (param) {
        $('.right_fixed .rt3').addClass('ccurr');
    }, function (param) {
        $('.right_fixed .rt3').removeClass('ccurr');
    });

    $('.rz4').hover(function (param) {
        $('.right_fixed .rt4').addClass('ccurr');
    }, function (param) {
        $('.right_fixed .rt4').removeClass('ccurr');
    });

    $('.rz5').hover(function (param) {
        $('.right_fixed .rt5').addClass('ccurr');
    }, function (param) {
        $('.right_fixed .rt5').removeClass('ccurr');
    });

    $('.rz6').hover(function (param) {
        $('.right_fixed .rt6').addClass('ccurr');
    }, function (param) {
        $('.right_fixed .rt6').removeClass('ccurr');
    });

    // 11
    $(document).on('click', '.rec-warp .rect_zheng', function (event) {
        event.preventDefault();
        $(this).addClass('curr').siblings().removeClass('curr');
    });

    $(document).on('click', '#nav p,.rec-warp .rect_zheng', function (event) {
        event.preventDefault();


        let getto = $(this).index();


        if (getto == 0) {
            $("html,body").animate({ "scrollTop": 0 }, 600);
        }

        let th1 = $('.p1').offset().top
        if (getto == 1) {
            $("html,body").animate({ "scrollTop": th1 }, 600);
        }
        let th2 = $('.p2').offset().top
        if (getto == 2) {
            $("html,body").animate({ "scrollTop": th2 }, 600);
        }

        let th3 = $('.p3').offset().top
        if (getto == 3) {
            $("html,body").animate({ "scrollTop": th3 }, 600);
        }

        let th4 = $('.p4').offset().top
        if (getto == 4) {
            $("html,body").animate({ "scrollTop": th4 }, 600);
        }

        let th5 = $('.p5').offset().top
        if (getto == 5) {
            $("html,body").animate({ "scrollTop": th5 }, 600);
        }
    });



    // maps
    const myAtropos = Atropos({
        el: '.my-atropos',
        activeOffset: 5,
        shadow: false,
        rotateXMax: 3,
        rotateYMax: 3,
        highlight: false
        // rest of parameters
    });

    // 轮播图 视差
    const gameAtropos = Atropos({
        el: '.game-atropos',
        activeOffset: 5,
        shadow: false,
        rotateXMax: 3,
        rotateYMax: 3,
        highlight: false
        // rest of parameters
    });

    // 机器人 视差
    const robotAtropos = Atropos({
        el: '.robot-atropos',
        activeOffset: 5,
        shadow: false,
        rotateXMax: 3,
        rotateYMax: 3,
        highlight: false
        // rest of parameters
    });

    // 划过四角动画

    // 关闭悬浮
    $(document).on('click', '.fixede_mid .btn_close', function (param) {
        $('.fixede_mid').stop().animate({
            'left': '-3.48rem'
        }, 300, function (param) {
            $('.fixede_mid .btn_open').stop().animate({
                'right': '-1.3rem',
                'opacity': '1'
            }, 300)
        });
    });

    $(document).on('click', '.fixede_mid .btn_open', function (param) {
        $(this).stop().animate({
            'right': '2.7rem',
            'opacity': '0'
        }, 300, function (param) {
            $('.fixede_mid').stop().animate({
                'left': '0'
            });
        });
    });

    // 背包划过
    $('.btn-draw-log').hover(function () {
        $('.btn-draw-log .btn-draw-tips').removeClass('open_ani_close').addClass('open_ani');
    }, function () {
        $('.btn-draw-log .btn-draw-tips').removeClass('open_ani').addClass('open_ani_close');
    });


    $('.fbeibao').hover(function () {
        $('.fbeibao .btn-draw-tips').removeClass('open_ani_close').addClass('open_ani');
    }, function () {
        $('.fbeibao .btn-draw-tips').removeClass('open_ani').addClass('open_ani_close');
    });


    // 回到顶部
    $(document).on('click', '.robot', function (event) {
        event.preventDefault();
        // parallaxScroll.
        $("html,body").animate({ "scrollTop": 0 }, 1000);
    });


    // 英雄渐变色控制
    granimInstance = new Granim({
        element: '#canvas-interactive',
        name: 'interactive-gradient',
        elToSetClassOn: '.p3-s1',
        direction: 'top-bottom', // 方向
        defaultStateName: 'artas-state',//初始状态
        isPausedWhenNotInView: true,// 超出暂停
        scrollDebounceThreshold: 300,
        stateTransitionSpeed: 1000, // 速度
        states: {
            "omar-state": {
                gradients: [[
                    {
                        color: 'rgba(235,42,33,0)'
                        , pos: 0.15
                    },
                    {
                        color: 'rgba(235,42,33,.25)'
                        , pos: 0.62
                    },
                    {
                        color: 'rgba(235,42,33,0)',
                        pos: 1
                    }]],
            },
            "emma-state": {
                gradients: [[
                    {
                        color: 'rgba(135,118,198,0)'
                        , pos: 0.15
                    },
                    {
                        color: 'rgba(135,118,198,.25)'
                        , pos: 0.62
                    },
                    {
                        color: 'rgba(135,118,198,0)',
                        pos: 1
                    }]],
            },
            // Kuite
            "kuite-state": {
                gradients: [[
                    {
                        color: 'rgba(89,255,230,0)'
                        , pos: 0.15
                    },
                    {
                        color: 'rgba(89,255,230,.25)'
                        , pos: 0.62
                    },
                    {
                        color: 'rgba(89,255,230,0)',
                        pos: 1
                    }]],
            },
            "artas-state": {
                gradients: [[
                    {
                        color: 'rgba(100,228,255,0)'
                        , pos: 0.15
                    },
                    {
                        color: 'rgba(100,228,255,.25)'
                        , pos: 0.62
                    },
                    {
                        color: 'rgba(100,228,255,0)',
                        pos: 1
                    }]],
            },
            // Crete
            "crete-state": {
                gradients: [[
                    {
                        color: 'rgba(255,116,73,0)'
                        , pos: 0.15
                    },
                    {
                        color: 'rgba(255,116,73,.25)'
                        , pos: 0.62
                    },
                    {
                        color: 'rgba(255,116,73,0)',
                        pos: 1
                    }]],
            },
            "luke-state": {
                gradients: [[
                    {
                        color: 'rgba(255,216,133,0)'
                        , pos: 0.15
                    },
                    {
                        color: 'rgba(255,216,133,.25)'
                        , pos: 0.62
                    },
                    {
                        color: 'rgba(255,216,133,0)',
                        pos: 1
                    }]],
            },
        }
    });

    $(document).on('click', '#omar-state-cta', function (event) {
        event.preventDefault();

        granimInstance.changeState('omar-state');
        setClass('#omar-state-cta');

        terranSwiper.slideTo(0, 600, true);

        $('.cta-wrapper.terran .hero-page dd span').stop().animate({
            'left': '0.15rem'
        }, 300);

        $('.tab1').attr('data-type', 'omar');
    });

    $(document).on('click', '#emma-state-cta', function (event) {
        event.preventDefault();

        granimInstance.changeState('emma-state');
        setClass('#emma-state-cta')

        terranSwiper.slideTo(1, 600, true);//切换到第一个slide，速度为1秒

        $('.cta-wrapper.terran .hero-page dd span').stop().animate({
            'left': '1.75rem'
        }, 300);

        $('.tab1').attr('data-type', 'emma');
    });

    $(document).on('click', '#layer-state-cta', function (event) {
        event.preventDefault();
        layer.msg('Coming Soon!');
    });


    function setClass(element) {
        // $('.cta-wrapper a').removeClass('active');
        // $(element).addClass('active');
        $(this).addClass('active').siblings().removeClass('active');
    };

    let slide;
    // 英雄展示
    var terranSwiper = new Swiper('#terran-hero .swiper', {
        effect: 'fade',
        initialSlide: 0,
        spaceBetween: 0,
        followFinger: false,
        speed: 500,
        loopAdditionalSlides: 3,
        navigation: {
            nextEl: '#terran-hero .swiper-button-next',
            prevEl: '#terran-hero .swiper-button-prev',
        },
        on: {
            init: function () {
                slide = this.slides.eq(0);
                slide.addClass('ani-slide');
            },

            transitionStart: function () {
                for (let i = 0; i < this.slides.length; i++) {
                    slide = this.slides.eq(i);
                    slide.removeClass('ani-slide');
                }
            },
            transitionEnd: function () {
                slide = this.slides.eq(this.activeIndex);
                slide.addClass('ani-slide');
            },

            slideChangeTransitionStart: function () {

                console.log(this.activeIndex);
                if (this.activeIndex == 0) {
                    $('.sh1 .cta-wrapper a').eq(0).addClass('active').siblings().removeClass('active');

                    $('.sh1 .hero-page .inow').text('01');

                    $('.cta-wrapper.terran .hero-page dd span').stop().animate({
                        'left': '0.15rem'
                    }, 300);
                }
                if (this.activeIndex == 1) {
                    $('.sh1 .cta-wrapper a').eq(1).addClass('active').siblings().removeClass('active');

                    $('.sh1 .hero-page .inow').text('02');

                    $('.cta-wrapper.terran .hero-page dd span').stop().animate({
                        'left': '1.75rem'
                    }, 300);
                }
            },
        },
    });



    $(document).on('click', '#kuite-state-cta', function (event) {
        event.preventDefault();

        granimInstance.changeState('kuite-state');
        setClass('#kuite-state-cta');

        atlasSwiper.slideTo(1, 600, true);

        $('.sh2 .cta-wrapper .hero-page dd span').stop().animate({
            'left': '1.75rem'
        }, 300);

        $('.tab2').attr('data-type', 'kuite');
    });

    $(document).on('click', '#artas-state-cta', function (event) {
        event.preventDefault();

        granimInstance.changeState('artas-state');
        setClass('#artas-state-cta')

        atlasSwiper.slideTo(0, 600, true);//切换到第一个slide，速度为1秒

        $('.sh2 .cta-wrapper .hero-page dd span').stop().animate({
            'left': '0.15rem'
        }, 300);

        $('.tab2').attr('data-type', 'artas');
    });

    var atlasSwiper = new Swiper('#atlas-hero .swiper', {
        effect: 'fade',
        initialSlide: 0,
        spaceBetween: 0,
        followFinger: false,
        speed: 500,
        loopAdditionalSlides: 3,
        navigation: {
            nextEl: '#atlas-hero .swiper-button-next',
            prevEl: '#atlas-hero .swiper-button-prev',
        },
        on: {
            init: function () {
                slide = this.slides.eq(0);
                slide.addClass('ani-slide');
            },

            transitionStart: function () {
                for (let i = 0; i < this.slides.length; i++) {
                    slide = this.slides.eq(i);
                    slide.removeClass('ani-slide');
                }
            },
            transitionEnd: function () {
                slide = this.slides.eq(this.activeIndex);
                slide.addClass('ani-slide');
            },
            slideChangeTransitionStart: function () {

                console.log(this.activeIndex);
                if (this.activeIndex == 0) {
                    $('.sh2 .cta-wrapper a').eq(0).addClass('active').siblings().removeClass('active');

                    // granimInstance.changeState('kuite-state');

                    $('.sh2 .hero-page .inow').text('01');

                    $('.sh2 .cta-wrapper .hero-page dd span').stop().animate({
                        'left': '0.15rem'
                    }, 300);
                }
                if (this.activeIndex == 1) {
                    $('.sh2 .cta-wrapper a').eq(1).addClass('active').siblings().removeClass('active');

                    // granimInstance.changeState('artas-state');

                    $('.sh2 .hero-page .inow').text('02');

                    $('.sh2 .cta-wrapper .hero-page dd span').stop().animate({
                        'left': '1.75rem'
                    }, 300);
                }
            },
        },
    });



    $(document).on('click', '#crete-state-cta', function (event) {
        event.preventDefault();

        granimInstance.changeState('crete-state');
        setClass('#crete-state-cta');

        wenfyrSwiper.slideTo(0, 600, true);

        $('.sh3 .cta-wrapper .hero-page dd span').stop().animate({
            'left': '0.15rem'
        }, 300);

        $('.tab3').attr('data-type', 'crete');
    });

    $(document).on('click', '#luke-state-cta', function (event) {
        event.preventDefault();

        granimInstance.changeState('luke-state');
        setClass('#luke-state-cta')

        wenfyrSwiper.slideTo(1, 600, true);//切换到第一个slide，速度为1秒

        $('.sh3 .cta-wrapper .hero-page dd span').stop().animate({
            'left': '1.75rem'
        }, 300);

        $('.tab3').attr('data-type', 'luke');
    });

    var wenfyrSwiper = new Swiper('#wenfyr-hero .swiper', {
        effect: 'fade',
        initialSlide: 0,
        spaceBetween: 0,
        followFinger: false,
        speed: 500,
        loopAdditionalSlides: 3,
        navigation: {
            nextEl: '#wenfyr-hero .swiper-button-next',
            prevEl: '#wenfyr-hero .swiper-button-prev',
        },
        on: {
            init: function () {
                slide = this.slides.eq(0);
                slide.addClass('ani-slide');
            },

            transitionStart: function () {
                for (let i = 0; i < this.slides.length; i++) {
                    slide = this.slides.eq(i);
                    slide.removeClass('ani-slide');
                }
            },
            transitionEnd: function () {
                slide = this.slides.eq(this.activeIndex);
                slide.addClass('ani-slide');
            },
            slideChangeTransitionStart: function () {

                console.log(this.activeIndex);
                if (this.activeIndex == 0) {
                    $('.sh3 .cta-wrapper a').eq(0).addClass('active').siblings().removeClass('active');

                    // granimInstance.changeState('kuite-state');

                    $('.sh3 .hero-page .inow').text('01');

                    $('.sh3 .cta-wrapper .hero-page dd span').stop().animate({
                        'left': '0.15rem'
                    }, 300);
                }
                if (this.activeIndex == 1) {
                    $('.sh3 .cta-wrapper a').eq(1).addClass('active').siblings().removeClass('active');

                    // granimInstance.changeState('artas-state');

                    $('.sh3 .hero-page .inow').text('02');

                    $('.sh3 .cta-wrapper .hero-page dd span').stop().animate({
                        'left': '1.75rem'
                    }, 300);
                }
            },
        },
    });

    // hero tab
    argumentsTabsTwo('.hero-tabs p');

});


function argumentsTabsTwo(tabList, page, i = 1) {
    var $div_li = $(tabList);
    $div_li.click(function () {
        $(this).addClass('curr').siblings().removeClass('curr');
        var index = $div_li.index(this);

        let iNow = index + 1;

        $(`.sh${iNow}`).addClass('active').siblings().removeClass('active');

        let dataType = $(this).attr('data-type');

        if (iNow == 1) {
            if (dataType == 'omar') {
                granimInstance.changeState('omar-state');
            }
            if (dataType == 'emma') {
                granimInstance.changeState('emma-state');
            }
        }
        if (iNow == 2) {
            if (dataType == 'kuite') {
                granimInstance.changeState('kuite-state');
            }
            if (dataType == 'artas') {
                granimInstance.changeState('artas-state');
            }
        }
        if (iNow == 3) {
            if (dataType == 'crete') {
                granimInstance.changeState('crete-state');
            }
            if (dataType == 'luke') {
                granimInstance.changeState('luke-state');
            }
        }

    }).eq(i).click();
};


function argumentsTabs(tabList, page) {
    var $div_li = $(tabList);
    $div_li.click(function () {
        $(this).addClass('curr').siblings().removeClass('curr');
        var index = $div_li.index(this);

        page.slideTo(index, 800, false);//切换到第一个slide，速度为1秒
        // 跟随横条
        console.log(index);
        $(this).siblings('.swp-nav .after').stop().animate({ 'left': (index * 2.28) + 1.4 + 'rem' }, "88");
    }).eq(0).click();
};

// 窗口化从新加载
$(window).resize(function () {
    setTimeout(() => {
        location.reload();
    }, 300);
});

// 滚动时添加
let sth1 = 600;
let sth2 = $('.p2').offset().top - 600;
let sth3 = $('.p3').offset().top - 600;
let sth4 = $('.p4').offset().top - 600;
let sth5 = $('.p5').offset().top - 600;

$(window).scroll(function () {
    var scrollT = $(window).scrollTop()
    scrollT = parseInt(scrollT);

    // console.log(scrollT);

    // console.log('th1----' + th4);
    // 更新侧边栏状态

    if (scrollT >= 1 && scrollT <= 100) {
        $('.rec-warp .rz1').addClass('curr').siblings().removeClass('curr');
    }

    if (scrollT >= 600) {
        $('.topbar').removeClass('animate__fadeIn').addClass(' animate__fadeOut');
    } else {
        $('.topbar').removeClass('animate__fadeOut').addClass('animate__fadeIn');
    }
    if (scrollT >= sth1) {
        $('.rec-warp .rz2').addClass('curr').siblings().removeClass('curr');

        $('.right_fixed .rt2').addClass('curr').siblings('.rect').removeClass('curr');
    }
    if (scrollT >= sth2) {
        $('.rec-warp .rz3').addClass('curr').siblings().removeClass('curr');

        $('.right_fixed .rt3').addClass('curr').siblings('.rect').removeClass('curr');

    }
    if (scrollT >= sth3) {
        $('.rec-warp .rz4').addClass('curr').siblings().removeClass('curr');
        $('.right_fixed .rt4').addClass('curr').siblings('.rect').removeClass('curr');

    }
    if (scrollT >= sth4) {
        $('.rec-warp .rz5').addClass('curr').siblings().removeClass('curr');
        $('.right_fixed .rt5').addClass('curr').siblings('.rect').removeClass('curr');
    }
    if (scrollT >= sth5) {
        $('.rec-warp .rz6').addClass('curr').siblings().removeClass('curr');
        $('.right_fixed .rt6').addClass('curr').siblings('.rect').removeClass('curr');

    }

    // console.log(scrollT);
    // document.querySelector('title').innerHTML = scrollT;

    if (scrollT >= 2600) {
        $('.p3-s1 .img-box .after').removeClass('hide animate__fadeOutRight').addClass('animate__animated animate__fadeInRight');
    } else {
        $('.p3-s1 .img-box .after').removeClass('animate__fadeInRight').addClass('animate__fadeOutRight');
    }

    if (scrollT >= 300) {
        $('.fixede_mid').removeClass('animate__fadeOutLeft').addClass('animate__fadeInLeft');
    } else {
        $('.fixede_mid').removeClass('animate__fadeInLeft').addClass('animate__fadeOutLeft');
    }

    if (scrollT >= 600) {
        $('.right_fixed').removeClass('animate__fadeOutRight').addClass('animate__fadeInRight');
    } else {
        $('.right_fixed').removeClass('animate__fadeInRight').addClass('animate__fadeOutRight');
    }
});







